

<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<meta name="description" content="eGov System" />
	<meta name="author" content="Ramana" />
	<meta http-equiv="cache-control" content="max-age=0" />
	<meta http-equiv="cache-control" content="no-cache" />
	<meta http-equiv="expires" content="0" />
	<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
	<meta http-equiv="pragma" content="no-cache" />
	<title>View Complaint registration</title>

<script
  src="https://code.jquery.com/jquery-1.12.4.js"
  integrity="sha256-Qw82+bXyGq6MydymqBxNPYTaUXXq7c8v3CwiYwLLNXU="
  crossorigin="anonymous"></script>

</head>
<body>
<form id="viewSearch">

	<table width="100%">
		<tr>
			<td width="100%" align="right"><a href="index.html"><H1>Home</H1></a> </br></td>
		</tr>
	</table>
	<table>

		<tr>
			<td><b>View Complaint registration</b></td>
			<td></td>
			<td></td>
		</tr>
		<tr>
			<td colspan="3"></td>
		</tr>
		<tr>
			<td colspan="3"></td>
		</tr>

		<tr>
			<td></td>
			<td>Complaints *</td>
			<td>
				<select name="complaint" id="complaint" required="required">
					
				</select>
			</td>

		</tr>

		<tr>
			<td colspan="3" align="center"><input type="button"
				value="Search" id="search" onclick="onSubmit();" /></td>
		</tr>
	</table>
</form>

</body>
<script>

complaints();

function onSubmit() {
var complaintId = document.getElementById("complaint").value;
	if (complaintId) {
		window.open("complaint-registration-view.html?id="+complaintId,complaintId,"width=800,height=600");
	} else
		alert("Please select complaint");
}

function complaints(){
	$.ajax({
		url: "/cr/complaint/_search",
		success : function(data){
			console.log(data);
			$('#complaint').empty();
			$('#complaint').append($("<option value=''>Select from below</option>"));
			$.each(data, function(index, value) {
				$('#complaint').append($('<option>').text(value.crn).attr('value', value.id));
			});
		},
		error: function(){
			console.log("Error while loading complaint types");
		}
	})
}
</script>
</html>
