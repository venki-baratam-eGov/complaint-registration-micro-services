

<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<meta name="description" content="eGov System" />
	<meta name="author" content="Ramana" />
	<meta http-equiv="cache-control" content="max-age=0" />
	<meta http-equiv="cache-control" content="no-cache" />
	<meta http-equiv="expires" content="0" />
	<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
	<meta http-equiv="pragma" content="no-cache" />
	<title>Complaint registration</title>

<script
  src="https://code.jquery.com/jquery-1.12.4.js"
  integrity="sha256-Qw82+bXyGq6MydymqBxNPYTaUXXq7c8v3CwiYwLLNXU="
  crossorigin="anonymous"></script>

</head>
<body>
<form enctype="application/json" id="command" action="/cr/complaint/_create" method="post">
	<table width="100%">
		<tr>
			<td width="100%" align="right"><a href="index.html"><H1>Home</H1></a> </br></td>
		</tr>
	</table>
	<table>
		<tr>
			<td><b>Complaint registration</b></td>
			<td></td>
			<td></td>
		</tr>
		<tr>
			<td colspan="3"></td>
		</tr>
		<tr>
			<td colspan="3"></td>
		</tr>
		<tr>
			<td>Contact Information</td>
			<td></td>
			<td></td>
		</tr>
		<tr>
			<td colspan="3"></td>
		</tr>
		<tr>
			<td></td>
			<td>Name *</td>
			<td><input id="complainant.name" name="complainant.name" required="required" type="text" value=""/></td>
		</tr>
		<tr>
			<td colspan="3"></td>
		</tr>
		<tr>
			<td></td>
			<td>Mobile Number *</td>
			<td><input id="complainant.mobile" name="complainant.mobile" required="required" type="text" value="" maxlength="10"/></td>
		</tr>
		<tr>
			<td colspan="3"></td>
		</tr>
		<tr>
			<td></td>
			<td>Email</td>
			<td><input id="complainant.email" name="complainant.email" type="text" value=""/></td>
		</tr>
		<tr>
			<td colspan="3"></td>
		</tr>


		<tr>
			<td>Grievance Information</td>
			<td></td>
			<td></td>
		</tr>
		<tr>
			<td colspan="3"></td>
		</tr>
		<tr>
			<td></td>
			<td>Complaint Type *</td>
			<td>
				<select id="complaintType" name="complaintType.id" class="form-control" required="required">
				</select>
			</td>

		</tr>

		<tr>
			<td colspan="3"></td>
		</tr>


		<tr>
			<td></td>
			<td>Department *</td>
			<td>
				<select id="department" name="department" class="form-control" required="required">
				</select>
			</td>

		</tr>

		<tr>
			<td colspan="3"></td>
		</tr>
		<tr>
			<td></td>
			<td>Complaint details *</td>
			<td><textarea id="doc" name="details" class="form-control autogrow" minlength="10" maxlength="500" placeholder="Give more details about the complaint to help us solve your issue" required="required">
</textarea></td>
		</tr>
		<tr>
			<td colspan="3"></td>
		</tr>
		<tr>
			<td></td>
			<td>Latitude *</td>
			<td><input id="latitude" name="latitude" required="required" type="text" value=""/></td>
		</tr>
		<tr>
			<td colspan="3"></td>
		</tr>
		<tr>
			<td></td>
			<td>Longitude *</td>
			<td><input id="longitude" name="longitude" required="required" type="text" value=""/></td>
		</tr>

		<tr>
			<td colspan="3"></td>
		</tr>

		<tr>
			<td></td>
			<td>Landmark (if any)</td>
			<td><textarea id="landmarkDetails" name="landmarkDetails" class="form-control autogrow" minlength="10" maxlength="500">
</textarea></td>
		</tr>
		<tr>
			<td colspan="3"></td>
		</tr>

		<tr>
			<td colspan="3" align="center"><input type="submit" value="Register" /></td>
		</tr>
	</table>
</form>
</body>
<script>
complaintTypes();
departments()
function complaintTypes(){
	$.ajax({
		url: "/cr/complainttype/_search",
		success : function(data){
			console.log(data);
			$('#complaintType').empty();
			$('#complaintType').append($("<option value=''>Select from below</option>"));
			$.each(data, function(index, value) {
				$('#complaintType').append($('<option>').text(value.name).attr('value', value.id));
			});
		},
		error: function(){
			console.log("Error while loading complaint types");
		}
	})
}

function departments(){
	$.ajax({
		url: "/eis/department/_search",
		success : function(data){
			console.log(data);
			$('#department').empty();
			$('#department').append($("<option value=''>Select from below</option>"));
			$.each(data, function(index, value) {
				$('#department').append($('<option>').text(value.name).attr('value', value.id));
			});
		},
		error: function(){
			console.log("Error while loading complaint types");
		}
	})
}

</script>
</html>
